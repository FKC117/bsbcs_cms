{% extends "gene_base.html" %}

{% block title %}Publications{% endblock %}

{% block content %}
<div class="relative bg-gradient-to-br from-pink-500 to-red-500 text-white pt-20 pb-10">
    <div class="mx-auto max-w-full text-center px-4">
        <h1 class="text-4xl sm:text-6xl font-extrabold md-10">Articles of the {{ event.name }} {{ event.year }}</h1>
        <p class="mt-4 text-lg">{{ event.slogan }}</p>
        <div class="flex justify-center mt-5">
            <a href="{% url 'registration:download_abstract_book' event_id=event.id %}" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg shadow-lg"> Download Abstract Book </a>
        </div>
    </div>
</div>
<section class="text-gray-900" style="background-color: #FEFCFB;">
    <div class="container px-5 py-20 mx-auto">
        <div class="flex flex-wrap -m-4">
            {% for publication in publications %}
                <div class="p-5 md:w-1/3">
                    <div class="h-full border-2 border-gray-600 rounded-lg overflow-hidden">
                        {% if publication.image %}
                            <img class="lg:h-48 md:h-36 w-full object-cover object-center" src="{{ publication.image.url }}" alt="{{ publication.title }}">
                        {% else %}
                            <img class="lg:h-48 md:h-36 w-full object-cover object-center" src="https://dummyimage.com/720x400" alt="blog">
                        {% endif %}
                        <div class="p-6">
                            <a href="{% url 'registration:publication_detail' event.id publication.id %}" target="_blank">
                                <h2 class="title-font text-lg font-medium text-indigo-500 mb-3 underline">{{ publication.title }}</h2>
                            </a>
                            <p class="leading-relaxed mb-3 text-gray-700">{{ publication.authors }}</p>
                            <p class="leading-relaxed mb-3 text-gray-700">{{ publication.institution }}</p>
                            <div class="flex items-center flex-wrap space-x-4">
                                <a href="{% url 'registration:publication_detail' event.id publication.id %}" class="text-indigo-500 inline-flex items-center md:mb-2 lg:mb-0">See More
                                    <svg class="w-4 h-4 ml-2" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M5 12h14"></path>
                                        <path d="M12 5l7 7-7 7"></path>
                                    </svg>
                                </a>
                                    <!-- Download PDF button (if PDF is uploaded) -->
                                {% if publication.presentation_file %}
                                    <a href="{{ publication.presentation_file.url }}" 
                                    class="text-white bg-green-600 hover:bg-green-800 font-semibold py-2 px-4 rounded-lg shadow-md"
                                    download>
                                        Download PDF
                                    </a>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
    {% if notebook and notebook.note_book %}
    <div class="flex justify-center mt-2">
        <img class="w-80 h-auto rounded-lg shasow-lg" src="{{ notebook.note_book.url }}" alt="Event Notebook">
    </div>
    {% endif %}
    <div class="flex justify-center mt-5 mb-10">
        <a href="{% url 'registration:download_abstract_book' event_id=event.id %}" 
           class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg shadow-lg">
            Download Abstract Book
        </a>
    </div>
           
</section>
{% endblock %}

